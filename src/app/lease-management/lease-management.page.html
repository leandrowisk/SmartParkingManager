<ion-content>
  <div id="container" [class.close]="!isMenuOpen" [class.open]="isMenuOpen">
    <div class="table-container">
      <span class="title">Histórico de Locações</span>
      <table mat-table [dataSource]="lease" class="mat-elevation-z8" multiTemplateDataRows>

        <ng-container matColumnDef="{{collumn}}" *ngFor="let collumn of displayedColumns; let index=index">
          <th mat-header-cell *matHeaderCellDef>{{collumn}}</th>
          <td mat-cell *matCellDef="let lease" [class.justified]="index == 4">
            <div [class.flex-field]="index == 0 || index == 4">
              <ion-avatar *ngIf="index == 0">
                <img class="user-perfil" src="{{lease.imagem}}">
              </ion-avatar>
              {{lease[collumn]}}
              <div *ngIf="index == 4">
                <span class="lease-details">Detalhes</span>
              </div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="expandedDetail">
          <td class="expand" mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
            <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
              <div class="example-element-diagram">
                <h2 class="details-title">Locação 10</h2>
                <div class="location-infos">

                  <div class="info">
                    <p>Usuário</p>
                    <span class="value">Leandro Tecioni Drumond</span>
                  </div>

                  <div class="info">
                    <p>Placa</p>
                    <span class="value">D781FD8</span>
                  </div>

                  <div class="info">
                    <p>Modelo</p>
                    <span class="value">Mustang</span>
                  </div>

                  <div class="info">
                    <p>Periodo</p>
                    <span class="value">5 horas</span>
                  </div>

                  <div class="info">
                    <p>Valor</p>
                    <span class="value">R$130</span>
                  </div>
                </div>

              </div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let element; columns: displayedColumns; let i = dataIndex" class="example-element-row"
          (click)="itemClicked(i)" [class.example-expanded-row]="expandedElement === element"
          (click)="expandedElement = expandedElement === element ? null : element">
        </tr>
        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        {{element}}
      </table>
      <mat-paginator #paginator [pageSize]="7" [length]="2" hidePageSize></mat-paginator>
    </div>


    <div class="financial-card">
      <mat-tab-group dynamicHeight mat-align-tabs="center" mat-stretch-tabs>
        <mat-tab label="Balanço diário">
          <div class="daily">

            <div class="daily-infos">
              <mat-form-field appearance="none">
                <mat-select [(value)]="selectedDay">
                  <mat-option *ngFor="let weekDay of weekDays" value="{{weekDay}}">
                    {{weekDay}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <p class="total">Valor Total <span class="total-value">R$ 50</span></p>
            </div>

            <canvas *ngIf="weekLabels" baseChart [datasets]="chartDaily" [labels]="weekLabels"
              [options]="lineChartOptions" [colors]="lineChartColors" [legend]="lineChartLegend"
              [chartType]="lineChartType" [plugins]="lineChartPlugins">
            </canvas>
          </div>

        </mat-tab>

        <mat-tab label="Balanço Mensal">
          <div class="monthly">

            <div class="monthly-infos">
              <mat-form-field appearance="none">
                <mat-select [(value)]="selectedMonth">
                  <mat-option *ngFor="let month of months" value="{{month}}">
                    {{month}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <p class="total">Valor Total <span class="total-value"> R$ 250</span></p>
            </div>

            <canvas *ngIf="monthLabels" baseChart [datasets]="chartMontly" [labels]="monthLabels"
              [options]="lineChartOptions" [colors]="lineChartColors" [legend]="lineChartLegend"
              [chartType]="lineChartType" [plugins]="lineChartPlugins">
            </canvas>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>

    <ion-fab vertical="bottom" horizontal="end" slot="fixed" class="chat-button" routerLink="/chat-bot">
      <mat-icon>chat</mat-icon>
    </ion-fab>
  </div>
</ion-content>